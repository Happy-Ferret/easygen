# easygen

[![MIT License](http://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)
[![GoDoc](https://godoc.org/github.com/go-easygen/easygen?status.svg)](http://godoc.org/github.com/go-easygen/easygen)
[![Go Report Card](https://goreportcard.com/badge/github.com/go-easygen/easygen)](https://goreportcard.com/report/github.com/go-easygen/easygen)
[![travis Status](https://travis-ci.org/go-easygen/easygen.svg?branch=master)](https://travis-ci.org/go-easygen/easygen)
[ ![Codeship Status for go-easygen/easygen](https://codeship.com/projects/4f9d9b30-b8ad-0133-b733-0e8881fc1b37/status?branch=master)](https://codeship.com/projects/135255)

## TOC
- [easygen - Easy to use universal code/text generator](#easygen---easy-to-use-universal-codetext-generator)
  - [Usage](#usage)
    - [$ easygen](#-easygen)
  - [Install](#install)
  - [Test](#test)
  - [Details](#details)
  - [Command line flag handling code auto-generation](#command-line-flag-handling-code-auto-generation)
  - [Testing the templates on the fly](#testing-the-templates-on-the-fly)
  - [Tips](#tips)
  - [Author(s) & Contributor(s)](#author(s)-&-contributor(s))

# easygen - Easy to use universal code/text generator

Command `easygen` is an easy to use universal code/text generator.

It can be used as a text or html generator for arbitrary purposes with arbitrary data and templates.

It can be used as a code generator, or anything that is structurally repetitive. Some command line parameter handling code generator are provided as examples, including the Go's built-in `flag` package, and the `viper` & `cobra` package.

You can even use easygen as a generic Go template testing tool using the `-ts` commandline option, and much much more.


## Usage

### $ easygen
```sh
Usage:
 easygen [flags] YamlFileName [YamlFileName...]

Flags:

  -debug level
    	debugging level
  -et extension
    	extension of template file (default ".tmpl")
  -ey extension
    	extension of yaml file (default ".yaml")
  -html
    	treat the template file as html instead of text
  -rf string
    	replace from, the from string used for the replace function
  -rt string
    	replace to, the to string used for the replace function
  -tf name(s)
    	.tmpl (comma-separated) template file name(s) (default: same as .yaml file)
  -ts string
    	template string (in text)

YamlFileName: The name for the .yaml data and .tmpl template file
	Only the name part, without extension. Can include the path as well.
```

## Install

	go get github.com/go-easygen/easygen/...
	ls -l $GOPATH/bin

You should find an `easygen` executable newly created in there. 

## Test

	export PATH=$PATH:$GOPATH/bin

	$ easygen $GOPATH/src/github.com/go-easygen/easygen/test/list0
	The colors are: red, blue, white, .

	cd $GOPATH/src/github.com/go-easygen/easygen

	$ easygen test/list1 
	The quoted colors are: "red", "blue", "white", .

	$ easygen -tf test/listfunc1 test/list0
	red, blue, white.


And also check out the provided [more examples](https://godoc.org/github.com/go-easygen/easygen#pkg-examples) in the [![Go Doc](https://img.shields.io/badge/godoc-reference-4b68a3.svg)](https://godoc.org/github.com/go-easygen/easygen) document.


## Details

- [Introduction to easygen and its philosophy ](https://suntong.github.io/blogs/2016/01/01/easygen---easy-to-use-universal-code/text-generator)
- [Easygen is now coding itself ](https://sfxpt.wordpress.com/2015/07/04/easygen-is-now-coding-itself/)
- [Showcasing the power of easygen with ffcvt ](https://sfxpt.wordpress.com/2015/08/02/showcasing-the-power-of-easygen-with-ffcvt/)
- [Easygen for HTML mock-up ](https://sfxpt.wordpress.com/2015/07/10/easygen-for-mock-up/)
- [Moving beyond code-gen and mock-up, using easygen in real life creating GPT partitions](https://suntong.github.io/blogs/2015/12/26/creating-gpt-partitions-easily-on-the-command-line)

<a name="clfhcag" />

## Command line flag handling code auto-generation

[ ](https://suntong.github.io/blogs/)

As explained above, one practical use of `easygen` is to auto-generating Go code for command line parameter handling, for both [`viper` and `cobra`](https://github.com/suntong/blog/blob/master/GoOptP7-easygen.md), and Go's [built-in `flag` package](https://sfxpt.wordpress.com/2015/07/04/easygen-is-now-coding-itself/).

Currently, `easygen`'s command line parameter handling is built on top of Go's built-in `flag` package, and the handling code is entirely generated by `easygen` itself. Thus, showing how `easygen` is handling the command line parameters itself also means showing what functionality the auto-generated command line parameter handling code can do for you. 

Currently, there are three tiers program parameters can be given:

0. Default values defined within the program, so that program parameters can have meaningful defaults to start with
0. Values defined in environment variables
0. Values passed from command line 

The latter will have higher priority and will override values defined formerly. I.e., the values from command line will override that in environment variables, which in turn override program defaults.

We will use the `-ts`, template string, as an example to illustrate. The program defaults is empty, which means using the `.tmpl` template file the same as the `.yaml` data file. We will override that first by environment variable, then from command line, illustrated in next section.

## Testing the templates on the fly


    echo 'Name: some-init-method' > /tmp/var.yaml

    $ EASYGEN_TS='{{.Name}}' easygen /tmp/var
    some-init-method

I.e., with the environment variable `EASYGEN_TS`, the `.tmpl` template file is not used.

	$ EASYGEN_TS='{{.Name}}' easygen -ts '{{ck2uc .Name}}' /tmp/var
	SomeInitMethod

I.e., command line value takes the highest priority, even overriding the environment variable `EASYGEN_TS`'s value.

As such, if you have a different naming convention than using `.tmpl` for template file and `.yaml` for data file, you can  override them in environment variables, `EASYGEN_ET` and `EASYGEN_EY`, so that you don't need to use `-et` and/or `-ey` to override them from command line each time. 

	echo 'Name: myConstantVariable' > /tmp/var.yml

	$ EASYGEN_EY=.yml easygen -ts '{{clc2ss .Name}}' /tmp/var
	MY_CONSTANT_VARIABLE


<a name="tips" />

## Tips

[ ](https://suntong.github.io/blogs/)

You can use `easygen` as an generic Go template testing tool with the `-ts` commandline option. For example,

```bash
echo "Age: 16" > /tmp/age.yaml

$ easygen -ts "{{.Age}}" /tmp/age
16

$ easygen -ts '{{printf "%x" .Age}}' /tmp/age
10

echo '{FirstName: John, LastName: Doe}' > /tmp/name.yaml

$ easygen -ts '{{.FirstName}}'\''s full name is {{printf "%s%s" .FirstName .LastName | len}} letters long.' /tmp/name
John's full name is 7 letters long.

$ easygen -ts "{{.FirstName}} {{ck2ss .LastName}}'s full name is "'{{len (printf "%s%s" .FirstName .LastName)}} letters long.' /tmp/name
John DOE's full name is 7 letters long.

echo 'Name: some-init-method' > /tmp/var.yaml

$ easygen -ts '{{.Name}} {{6 | minus1}} {{minus1 6}} {{ck2lc .Name}} {{ck2uc .Name}}' /tmp/var
some-init-method 5 5 someInitMethod SomeInitMethod

```

## Author(s) & Contributor(s)

Tong SUN  
![suntong from cpan.org](https://img.shields.io/badge/suntong-%40cpan.org-lightgrey.svg "suntong from cpan.org")

Gerrit Renker  
https://github.com/grrtrr

All patches welcome. 
